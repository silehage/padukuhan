import{q as U,r as C,ao as $,k as h,e as o,f as a,l as u,w as s,z as _,D as i,H as f,v as c,ap as B,M as k,i as t,t as m,F as b,R as V,aq as I,$ as j,n as A,p as w,U as H,ar as T,as as E}from"./app-DUr2e_ho.js";import{Q as S,a as q}from"./QCard-RDMg7hlf.js";import{Q as M,a as z}from"./QSelect-DsOxfT8I.js";import{C as L}from"./ClosePopup-gdHTicwe.js";import"./use-key-composition-8jroF8kB.js";import"./QMenu-CSJpfavl.js";import"./private.use-form-Xm1ZRPt_.js";const O={class:"table"},R={class:"table-responsive q-mt-lg"},G={class:"table"},J={key:0},W={class:"q-gutter-sm"},X={key:0,class:"text-center py-4"},Y={class:"card-title flex justify-between items-center"},Z="Penduduk",oe=U({__name:"Show",props:["data","items","columns"],setup(r){const g=n=>H(`${n} ${Z}`),y=C([]),p=$({kartu_keluarga_id:"",penduduk_id:""}),K=C(null),v=C(!1),D=n=>{p.penduduk_id=n.id,K.value=n,v.value=!0},F=async(n,e)=>{if(!n||n==""){e(()=>{y.value=[]});return}const l=await(await fetch(T(n).url)).json();e(()=>{y.value=l.map(d=>({label:`${d.kepala_keluarga} - ${d.nomor}`,value:d.id}))})},N=()=>{p.post(E().url,{onSuccess:()=>{v.value=!1}})};return(n,e)=>{const x=h("AppHeader");return a(),o(b,null,[u(x,{title:"Penduduk"},{default:s(()=>[g("Create")?(a(),_(f,{key:0,color:"primary",href:c(B)(r.data.id).url},{default:s(()=>e[2]||(e[2]=[k("Tambah Anggota",-1)])),_:1,__:[2]},8,["href"])):i("",!0)]),_:1}),u(q,{class:"section"},{default:s(()=>[u(S,null,{default:s(()=>[t("div",null,[e[8]||(e[8]=t("div",{class:"flex justify-end"},null,-1)),t("table",O,[t("tr",null,[e[3]||(e[3]=t("td",null,"No Kartu Keluarga",-1)),t("td",null,m(r.data.nomor),1)]),t("tr",null,[e[4]||(e[4]=t("td",null,"Kepala Keluarga",-1)),t("td",null,m(r.data.kepala_keluarga),1)])]),t("div",R,[t("table",G,[t("thead",null,[t("tr",null,[e[5]||(e[5]=t("th",{class:"text-left"},"#",-1)),(a(!0),o(b,null,V(r.columns,l=>(a(),o("th",{class:"text-left uppercase",key:l},m(l.split("_").join(" ")),1))),128)),g("Update")?(a(),o("th",J,"Aksi")):i("",!0)])]),t("tbody",null,[(a(!0),o(b,null,V(r.items,(l,d)=>(a(),o("tr",{key:d},[t("td",null,m(1+d),1),(a(!0),o(b,null,V(r.columns,(Q,P)=>(a(),o("td",{key:P},m(l[Q]),1))),128)),t("td",W,[g("Update")?(a(),_(f,{key:0,color:"blue",class:"btn-action",href:c(I)({id:r.data.id,itemId:l.id}).url},{default:s(()=>e[6]||(e[6]=[k("Edit",-1)])),_:2,__:[6]},1032,["href"])):i("",!0),g("Update")?(a(),_(f,{key:1,color:"purple",class:"btn-action","no-caps":"",onClick:Q=>D(l)},{default:s(()=>e[7]||(e[7]=[k("Pindah KK",-1)])),_:2,__:[7]},1032,["onClick"])):i("",!0)])]))),128))])])]),r.items.length?i("",!0):(a(),o("div",X,"Tidak ada data"))])]),_:1})]),_:1}),u(z,{modelValue:v.value,"onUpdate:modelValue":e[1]||(e[1]=l=>v.value=l)},{default:s(()=>[u(q,{class:"card-lg"},{default:s(()=>[u(S,null,{default:s(()=>[t("div",Y,[e[9]||(e[9]=t("div",null,"Form Pindak Kartu Keluarga",-1)),j(u(f,{flat:"",icon:"close",dense:""},null,512),[[L]])]),t("div",null,[K.value?(a(),_(A,{key:0,class:"q-px-none"},{default:s(()=>[u(w,{side:""},{default:s(()=>e[10]||(e[10]=[k("Nama",-1)])),_:1,__:[10]}),u(w,null,{default:s(()=>[k(m(K.value.nama_lengkap),1)]),_:1})]),_:1})):i("",!0),u(M,{debounce:"700","use-input":"","emit-value":"","map-options":"",modelValue:c(p).kartu_keluarga_id,"onUpdate:modelValue":e[0]||(e[0]=l=>c(p).kartu_keluarga_id=l),label:"Kartu Keluarga",options:y.value,onFilter:F},null,8,["modelValue","options"]),u(f,{disable:!c(p).kartu_keluarga_id,label:"Simpan Data",color:"primary",class:"full-width q-mt-lg",onClick:N},null,8,["disable"])])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}}});export{oe as default};
