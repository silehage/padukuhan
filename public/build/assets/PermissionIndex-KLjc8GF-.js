import{c as P,b as C,h as b,Q as S,ao as w,r as h,k as A,e as r,f as t,l as d,w as v,i as o,H as y,M as x,F as p,R as g,z as F,t as c,D as I,bu as N}from"./app-DUr2e_ho.js";import{u as z,a as H,b as L}from"./use-checkbox-Dqk4HxVt.js";import{Q as T,a as D}from"./QCard-RDMg7hlf.js";import"./private.use-form-Xm1ZRPt_.js";const E=P({name:"QToggle",props:{...H,icon:String,iconColor:String},emits:z,setup(n){function u(a,_){const l=C(()=>(a.value===!0?n.checkedIcon:_.value===!0?n.indeterminateIcon:n.uncheckedIcon)||n.icon),i=C(()=>a.value===!0?n.iconColor:null);return()=>[b("div",{class:"q-toggle__track"}),b("div",{class:"q-toggle__thumb absolute flex flex-center no-wrap"},l.value!==void 0?[b(S,{name:l.value,color:i.value})]:void 0)]}return L("toggle",u)}}),U={class:"q-mb-md q-gutter-sm"},$={class:"table-responsive"},M={class:"table bordered"},O={class:"nowrap"},R={key:0,class:"q-ml-sm"},W={__name:"PermissionIndex",props:["roles","permissions","modules"],setup(n){const u=n,a=w({permission_id:"",role_id:""}),_=(m,s)=>{a.permission_id=m,a.role_id=s,a.post(N(),{preserveScroll:!0,onFinish:()=>a.reset()}),console.log(a)},l=h(""),i=h(u.roles),Q=C(()=>l.value?u.permissions.filter(m=>m.module==l.value):u.permissions);return(m,s)=>{const V=A("AppHeader");return t(),r("div",null,[d(V,{title:"Assign Permissions"}),d(D,{class:"section q-mt-md",flat:""},{default:v(()=>[d(T,null,{default:v(()=>[o("div",U,[d(y,{unelevated:"",size:"13px",color:l.value==""?"blue":"grey-6",onClick:s[0]||(s[0]=e=>l.value="")},{default:v(()=>s[1]||(s[1]=[x("ALL",-1)])),_:1,__:[1]},8,["color"]),(t(!0),r(p,null,g(n.modules,e=>(t(),F(y,{key:e,unelevated:"",size:"13px",color:l.value==e?"blue":"grey-6",onClick:f=>l.value=e},{default:v(()=>[x(c(e),1)]),_:2},1032,["color","onClick"]))),128))]),o("div",$,[o("table",M,[o("thead",null,[o("tr",null,[s[2]||(s[2]=o("th",null,"#",-1)),s[3]||(s[3]=o("th",null,"Permissions",-1)),(t(!0),r(p,null,g(n.roles,e=>(t(),r("th",{key:e.id},c(e.name),1))),128))])]),o("tbody",null,[(t(!0),r(p,null,g(Q.value,(e,f)=>(t(),r("tr",{key:f},[o("td",null,c(f+1),1),o("td",null,[o("div",O,[o("span",null,c(e.ability),1),l.value?I("",!0):(t(),r("span",R,c(e.module),1))])]),(t(!0),r(p,null,g(i.value,(q,k)=>(t(),r("td",{key:k},[d(E,{modelValue:i.value[k].permissions,"onUpdate:modelValue":[B=>i.value[k].permissions=B,()=>_(e.id,q.id)],val:e.id},null,8,["modelValue","onUpdate:modelValue","val"])]))),128))]))),128))])])])]),_:1})]),_:1})])}}};export{W as default};
