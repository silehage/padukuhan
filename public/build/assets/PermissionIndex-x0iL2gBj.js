import{c as P,b as C,h as k,Q as S,av as w,r as h,i as A,e as r,f as t,j as d,w as v,g as o,E as x,K as y,F as p,O as g,x as F,t as c,B as I,bo as N}from"./app-BVNLYVKN.js";import{u as E,a as L,b as T}from"./use-checkbox-BULV_kL8.js";import{Q as z,a as H}from"./QCard-Dzqacee3.js";import"./private.use-form-0o0Ad5su.js";const O=P({name:"QToggle",props:{...L,icon:String,iconColor:String},emits:E,setup(n){function i(a,_){const s=C(()=>(a.value===!0?n.checkedIcon:_.value===!0?n.indeterminateIcon:n.uncheckedIcon)||n.icon),u=C(()=>a.value===!0?n.iconColor:null);return()=>[k("div",{class:"q-toggle__track"}),k("div",{class:"q-toggle__thumb absolute flex flex-center no-wrap"},s.value!==void 0?[k(S,{name:s.value,color:u.value})]:void 0)]}return T("toggle",i)}}),U={class:"q-mb-md q-gutter-sm"},$={class:"table-responsive"},j={class:"table bordered"},D={class:"nowrap"},K={key:0,class:"q-ml-sm"},W={__name:"PermissionIndex",props:["roles","permissions","modules"],setup(n){const i=n,a=w({permission_id:"",role_id:""}),_=(m,l)=>{a.permission_id=m,a.role_id=l,a.post(N(),{preserveScroll:!0,onFinish:()=>a.reset()}),console.log(a)},s=h(""),u=h(i.roles),Q=C(()=>s.value?i.permissions.filter(m=>m.module==s.value):i.permissions);return(m,l)=>{const V=A("AppHeader");return t(),r("div",null,[d(V,{title:"Assign Permissions"}),d(H,{class:"section q-mt-md",flat:""},{default:v(()=>[d(z,null,{default:v(()=>[o("div",U,[d(x,{unelevated:"",size:"13px",color:s.value==""?"blue":"grey-6",onClick:l[0]||(l[0]=e=>s.value="")},{default:v(()=>l[1]||(l[1]=[y("ALL",-1)])),_:1,__:[1]},8,["color"]),(t(!0),r(p,null,g(n.modules,e=>(t(),F(x,{key:e,unelevated:"",size:"13px",color:s.value==e?"blue":"grey-6",onClick:f=>s.value=e},{default:v(()=>[y(c(e),1)]),_:2},1032,["color","onClick"]))),128))]),o("div",$,[o("table",j,[o("thead",null,[o("tr",null,[l[2]||(l[2]=o("th",null,"#",-1)),l[3]||(l[3]=o("th",null,"Permissions",-1)),(t(!0),r(p,null,g(n.roles,e=>(t(),r("th",{key:e.id},c(e.name),1))),128))])]),o("tbody",null,[(t(!0),r(p,null,g(Q.value,(e,f)=>(t(),r("tr",{key:f},[o("td",null,c(f+1),1),o("td",null,[o("div",D,[o("span",null,c(e.ability),1),s.value?I("",!0):(t(),r("span",K,c(e.module),1))])]),(t(!0),r(p,null,g(u.value,(q,b)=>(t(),r("td",{key:b},[d(O,{modelValue:u.value[b].permissions,"onUpdate:modelValue":[B=>u.value[b].permissions=B,()=>_(e.id,q.id)],val:e.id},null,8,["modelValue","onUpdate:modelValue","val"])]))),128))]))),128))])])])]),_:1})]),_:1})])}}};export{W as default};
