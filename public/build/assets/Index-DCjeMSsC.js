import{az as $,aA as S,aB as F,aC as K,r as x,b as L,aD as Q,aE as T,i as h,e as i,f as d,j as s,w as u,g as e,x as k,B as p,E as m,K as C,F as w,O as j,t as _,I,J as R,Z as z,q as H,C as J,D as M,S as O}from"./app-CoNKp3pG.js";import{Q as E,a as P}from"./QCard-Bg_MuKxW.js";import{a as Z}from"./QSelect-CbMxMEvv.js";import{_ as g,a as y}from"./Input.vue_vue_type_script_setup_true_lang-BJYI_3-u.js";import{_ as G}from"./Select.vue_vue_type_script_setup_true_lang-DEFP2J4-.js";import"./QInput-_L_Gdmn7.js";import"./private.use-form-DhdyxsIe.js";import"./QMenu-BWxHDjqf.js";function V(a){if(a===!1)return 0;if(a===!0||a===void 0)return 1;const o=parseInt(a,10);return isNaN(o)?0:o}const W=$({name:"close-popup",beforeMount(a,{value:o}){const l={depth:V(o),handler(r){l.depth!==0&&setTimeout(()=>{const c=F(a);c!==void 0&&K(c,r,l.depth)})},handlerKey(r){S(r,13)===!0&&l.handler(r)}};a.__qclosepopup=l,a.addEventListener("click",l.handler),a.addEventListener("keyup",l.handlerKey)},updated(a,{value:o,oldValue:l}){o!==l&&(a.__qclosepopup.depth=V(o))},beforeUnmount(a){const o=a.__qclosepopup;a.removeEventListener("click",o.handler),a.removeEventListener("keyup",o.handlerKey),delete a.__qclosepopup}}),X={class:"flex justify-end q-gutter-sm"},Y={class:"table-responsive"},ee={class:"table bordered"},ae={key:0,class:"text-left uppercase"},te={class:"q-gutter-xs no-wrap"},le={key:0},se={class:"card-title flex justify-between items-center"},oe={class:"q-gutter-sm"},ne="User",ve={__name:"Index",props:["data","roles"],setup(a){const o=x(!1),l=x(null),r=x(!1),c=()=>{l.value=null,r.value=!0,o.value=!0},q=f=>{l.value=f,r.value=!1,o.value=!0},b=f=>O(`${f} ${ne}`),U=()=>{o.value=!1},A=L(()=>l.value?Q().form(l.value.id):T().form());return(f,t)=>{const N=h("AppHeader"),B=h("AppPagination");return d(),i(w,null,[s(N,{title:"Users"},{default:u(()=>[e("div",X,[b("Create")?(d(),k(m,{key:0,color:"primary",onClick:c},{default:u(()=>t[2]||(t[2]=[C("Tambah User",-1)])),_:1,__:[2]})):p("",!0)])]),_:1}),s(P,{class:"section"},{default:u(()=>[s(E,null,{default:u(()=>[e("div",null,[e("div",Y,[e("table",ee,[e("thead",null,[e("tr",null,[t[3]||(t[3]=e("th",{class:"text-left uppercase"},"#",-1)),t[4]||(t[4]=e("th",{class:"text-left uppercase"},"Nama",-1)),t[5]||(t[5]=e("th",{class:"text-left uppercase"},"Email",-1)),t[6]||(t[6]=e("th",{class:"text-left uppercase"},"Role",-1)),b("Update")?(d(),i("th",ae,"Aksi")):p("",!0)])]),e("tbody",null,[(d(!0),i(w,null,j(a.data.data,(n,v)=>(d(),i("tr",{key:v},[e("td",null,_(a.data.from+v),1),e("td",null,_(n.name),1),e("td",null,_(n.email),1),e("td",null,_(n.role?n.role.name:"-"),1),e("td",te,[b("Update")?(d(),k(m,{key:0,class:"btn-action","no-caps":"",color:"blue",onClick:D=>q(n)},{default:u(()=>t[7]||(t[7]=[C("Edit",-1)])),_:2,__:[7]},1032,["onClick"])):p("",!0)])]))),128)),a.data.total?p("",!0):(d(),i("tr",le,t[8]||(t[8]=[e("td",{colspan:"20",class:"text-center"},"Tidak ada data",-1)])))])])]),s(B,I(R(a.data)),null,16)])]),_:1})]),_:1}),s(Z,{modelValue:o.value,"onUpdate:modelValue":t[1]||(t[1]=n=>o.value=n)},{default:u(()=>[s(P,{class:"section card-lg"},{default:u(()=>[s(E,null,{default:u(()=>[e("div",se,[t[9]||(t[9]=e("div",null,"Form User",-1)),z(s(m,{flat:"",round:"",icon:"close"},null,512),[[W]])]),s(H(J),M(A.value,{autocomplete:"off",options:{preserveScroll:!1,preserveState:!1},onFinish:U}),{default:u(({errors:n,processing:v})=>[e("div",oe,[e("div",null,[s(g,{defaultValue:l.value?l.value.name:"",label:"Nama",id:"name",name:"name",autocomplete:"off"},null,8,["defaultValue"]),s(y,{message:n.name},null,8,["message"])]),e("div",null,[s(g,{defaultValue:l.value?l.value.email:"",label:"Email",id:"email",name:"email",type:"email",autocomplete:"off"},null,8,["defaultValue"]),s(y,{message:n.email},null,8,["message"])]),e("div",null,[s(G,{defaultValue:l.value?l.value.role_id:"",label:"Role",id:"role",name:"role",options:a.roles,"emit-value":"","map-options":""},null,8,["defaultValue","options"]),s(y,{message:n.role},null,8,["message"])]),e("div",null,[r.value?p("",!0):(d(),k(m,{key:0,padding:"1px 4px",flat:"","no-caps":"",color:"primary",class:"q-my-xs",label:"Edit Password",onClick:t[0]||(t[0]=D=>r.value=!r.value)}))]),r.value?(d(),i(w,{key:0},[s(g,{label:"Password",id:"password",name:"password",autocomplete:"new-password"}),e("div",null,[s(g,{label:"Ulangi Password",id:"password_confirmation",name:"password_confirmation",type:"password_confirmation",autocomplete:""}),s(y,{message:n.password_confirmation},null,8,["message"])])],64)):p("",!0)]),s(m,{loading:v,label:"Submit",type:"submit",color:"primary",class:"full-width q-mt-lg"},null,8,["loading"])]),_:1},16)]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}}};export{ve as default};
